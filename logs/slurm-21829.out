#!/usr/bin/bash

#SBATCH -J mipnerf-multicam
#SBATCH --gres=gpu:1
#SBATCH --cpus-per-gpu=8
#SBATCH --mem-per-gpu=32G
#SBATCH -p batch_ugrad
#SBATCH -t 1-0
#SBATCH -o logs/slurm-%A.out

cat sbatch.sh
pwd
which python
hostname

# python visualize.py --dataset_name llff --model_weight_path log/llff/model.pt --log_dir log/llff --scene flower 
# python extract_mesh.py --log_dir log/llff

python visualize.py --dataset_name blender --model_weight_path log/blender/model.pt --log_dir log/blender --scene lego 
python extract_mesh.py --log_dir log/blender

# python train.py --dataset_name multicam --log_dir log/multicam --batch_size 512
# python visualize.py --dataset_name multicam --model_weight_path log/multicam/model.pt --log_dir log/multicam --scene lego 
# python extract_mesh.py --log_dir log/multicam

exit 0
/data/csj000714/repos/mipnerf-pytorch
/data/csj000714/anaconda3/envs/mipNeRF/bin/python
aurora-g2
Generating Render Poses
Generating rays
Done

Generating Video using 120 different view points
  0%|          | 0/120 [00:00<?, ?it/s]  1%|          | 1/120 [00:38<1:15:45, 38.20s/it]  2%|▏         | 2/120 [01:13<1:11:17, 36.25s/it]  2%|▎         | 3/120 [01:47<1:08:48, 35.29s/it]  3%|▎         | 4/120 [02:20<1:06:53, 34.60s/it]  4%|▍         | 5/120 [02:54<1:05:53, 34.38s/it]  5%|▌         | 6/120 [03:28<1:04:59, 34.21s/it]  6%|▌         | 7/120 [04:02<1:04:20, 34.16s/it]  7%|▋         | 8/120 [04:37<1:04:12, 34.39s/it]  8%|▊         | 9/120 [05:11<1:03:07, 34.12s/it]  8%|▊         | 10/120 [05:45<1:02:44, 34.22s/it]  9%|▉         | 11/120 [06:19<1:02:11, 34.23s/it] 10%|█         | 12/120 [06:53<1:01:33, 34.20s/it] 11%|█         | 13/120 [07:27<1:00:48, 34.10s/it] 12%|█▏        | 14/120 [08:02<1:00:24, 34.19s/it] 12%|█▎        | 15/120 [08:36<59:50, 34.20s/it]   13%|█▎        | 16/120 [09:10<59:22, 34.26s/it] 14%|█▍        | 17/120 [09:45<58:52, 34.30s/it] 15%|█▌        | 18/120 [10:18<57:43, 33.96s/it] 16%|█▌        | 19/120 [10:52<57:17, 34.03s/it] 17%|█▋        | 20/120 [11:26<56:48, 34.09s/it] 18%|█▊        | 21/120 [12:01<56:19, 34.14s/it] 18%|█▊        | 22/120 [12:35<55:41, 34.10s/it] 19%|█▉        | 23/120 [13:09<55:21, 34.24s/it] 20%|██        | 24/120 [13:43<54:39, 34.16s/it] 21%|██        | 25/120 [14:16<53:40, 33.90s/it] 22%|██▏       | 26/120 [14:50<53:07, 33.91s/it] 22%|██▎       | 27/120 [15:24<52:38, 33.96s/it] 23%|██▎       | 28/120 [15:59<52:22, 34.15s/it] 24%|██▍       | 29/120 [16:33<51:50, 34.18s/it] 25%|██▌       | 30/120 [17:07<51:06, 34.07s/it] 26%|██▌       | 31/120 [17:41<50:32, 34.07s/it] 27%|██▋       | 32/120 [18:15<50:03, 34.14s/it] 28%|██▊       | 33/120 [18:50<49:39, 34.25s/it] 28%|██▊       | 34/120 [19:23<48:39, 33.94s/it] 29%|██▉       | 35/120 [19:58<48:18, 34.10s/it] 30%|███       | 36/120 [20:32<47:50, 34.17s/it] 31%|███       | 37/120 [21:06<47:21, 34.24s/it] 32%|███▏      | 38/120 [21:41<46:44, 34.20s/it] 32%|███▎      | 39/120 [22:15<46:21, 34.34s/it] 33%|███▎      | 40/120 [22:49<45:33, 34.17s/it] 34%|███▍      | 41/120 [23:22<44:38, 33.90s/it] 35%|███▌      | 42/120 [23:56<44:08, 33.96s/it] 36%|███▌      | 43/120 [24:31<43:40, 34.03s/it] 37%|███▋      | 44/120 [25:05<43:25, 34.28s/it] 38%|███▊      | 45/120 [25:40<42:51, 34.29s/it] 38%|███▊      | 46/120 [26:14<42:08, 34.17s/it] 39%|███▉      | 47/120 [26:47<41:26, 34.06s/it] 40%|████      | 48/120 [27:21<40:51, 34.04s/it] 41%|████      | 49/120 [27:56<40:30, 34.23s/it] 42%|████▏     | 50/120 [28:29<39:36, 33.96s/it] 42%|████▎     | 51/120 [29:04<39:15, 34.13s/it] 43%|████▎     | 52/120 [29:38<38:47, 34.23s/it] 44%|████▍     | 53/120 [30:13<38:19, 34.32s/it] 45%|████▌     | 54/120 [30:47<37:36, 34.19s/it] 46%|████▌     | 55/120 [31:21<37:10, 34.32s/it] 47%|████▋     | 56/120 [31:55<36:23, 34.12s/it] 48%|████▊     | 57/120 [32:28<35:32, 33.85s/it] 48%|████▊     | 58/120 [33:02<35:05, 33.96s/it] 49%|████▉     | 59/120 [33:37<34:38, 34.08s/it] 50%|█████     | 60/120 [34:12<34:18, 34.31s/it] 51%|█████     | 61/120 [34:46<33:40, 34.24s/it] 52%|█████▏    | 62/120 [35:20<32:59, 34.13s/it] 52%|█████▎    | 63/120 [35:53<32:19, 34.02s/it] 53%|█████▎    | 64/120 [36:28<31:48, 34.08s/it] 54%|█████▍    | 65/120 [37:02<31:26, 34.29s/it] 55%|█████▌    | 66/120 [37:36<30:36, 34.01s/it] 56%|█████▌    | 67/120 [38:10<30:12, 34.21s/it] 57%|█████▋    | 68/120 [38:45<29:37, 34.19s/it] 57%|█████▊    | 69/120 [39:19<29:06, 34.24s/it] 58%|█████▊    | 70/120 [39:53<28:23, 34.07s/it] 59%|█████▉    | 71/120 [40:27<27:59, 34.27s/it] 60%|██████    | 72/120 [41:01<27:20, 34.17s/it] 61%|██████    | 73/120 [41:34<26:30, 33.83s/it] 62%|██████▏   | 74/120 [42:09<26:05, 34.03s/it] 62%|██████▎   | 75/120 [42:43<25:32, 34.06s/it] 63%|██████▎   | 76/120 [43:17<25:03, 34.17s/it] 64%|██████▍   | 77/120 [43:51<24:27, 34.14s/it] 65%|██████▌   | 78/120 [44:26<23:53, 34.13s/it] 66%|██████▌   | 79/120 [44:59<23:15, 34.04s/it] 67%|██████▋   | 80/120 [45:33<22:41, 34.04s/it] 68%|██████▊   | 81/120 [46:09<22:21, 34.39s/it] 68%|██████▊   | 82/120 [46:42<21:34, 34.06s/it] 69%|██████▉   | 83/120 [47:16<21:00, 34.08s/it] 70%|███████   | 84/120 [47:50<20:30, 34.17s/it] 71%|███████   | 85/120 [48:25<20:02, 34.35s/it] 72%|███████▏  | 86/120 [48:59<19:19, 34.12s/it] 72%|███████▎  | 87/120 [49:34<18:52, 34.33s/it] 73%|███████▎  | 88/120 [50:08<18:18, 34.32s/it] 74%|███████▍  | 89/120 [50:41<17:30, 33.89s/it] 75%|███████▌  | 90/120 [51:15<16:57, 33.92s/it] 76%|███████▌  | 91/120 [51:49<16:28, 34.10s/it] 77%|███████▋  | 92/120 [52:24<16:01, 34.33s/it] 78%|███████▊  | 93/120 [52:58<15:22, 34.17s/it] 78%|███████▊  | 94/120 [53:32<14:49, 34.20s/it] 79%|███████▉  | 95/120 [54:06<14:14, 34.19s/it] 80%|████████  | 96/120 [54:40<13:36, 34.02s/it] 81%|████████  | 97/120 [55:15<13:07, 34.23s/it] 82%|████████▏ | 98/120 [55:48<12:28, 34.00s/it] 82%|████████▎ | 99/120 [56:23<11:56, 34.10s/it] 83%|████████▎ | 100/120 [56:57<11:22, 34.11s/it] 84%|████████▍ | 101/120 [57:32<10:52, 34.36s/it] 85%|████████▌ | 102/120 [58:06<10:16, 34.23s/it] 86%|████████▌ | 103/120 [58:40<09:41, 34.20s/it] 87%|████████▋ | 104/120 [59:14<09:07, 34.19s/it] 88%|████████▊ | 105/120 [59:47<08:27, 33.83s/it] 88%|████████▊ | 106/120 [1:00:21<07:55, 33.93s/it] 89%|████████▉ | 107/120 [1:00:55<07:21, 34.00s/it] 90%|█████████ | 108/120 [1:01:30<06:51, 34.32s/it] 91%|█████████ | 109/120 [1:02:05<06:17, 34.32s/it] 92%|█████████▏| 110/120 [1:02:38<05:39, 33.94s/it] 92%|█████████▎| 111/120 [1:03:12<05:07, 34.17s/it] 93%|█████████▎| 112/120 [1:03:46<04:32, 34.04s/it] 94%|█████████▍| 113/120 [1:04:21<03:59, 34.23s/it] 95%|█████████▌| 114/120 [1:04:55<03:25, 34.17s/it] 96%|█████████▌| 115/120 [1:05:29<02:50, 34.13s/it] 97%|█████████▋| 116/120 [1:06:03<02:16, 34.14s/it] 98%|█████████▊| 117/120 [1:06:36<01:41, 33.95s/it] 98%|█████████▊| 118/120 [1:07:11<01:08, 34.15s/it] 99%|█████████▉| 119/120 [1:07:45<00:34, 34.11s/it]100%|██████████| 120/120 [1:08:20<00:00, 34.21s/it]100%|██████████| 120/120 [1:08:20<00:00, 34.17s/it][libx264 @ 0x6924d40] -qscale is ignored, -crf is recommended.

Traceback (most recent call last):
  File "extract_mesh.py", line 96, in <module>
    extract_mesh(config)
  File "extract_mesh.py", line 36, in extract_mesh
    model.load_state_dict(torch.load(config.model_weight_path))
  File "/data/csj000714/anaconda3/envs/mipNeRF/lib/python3.7/site-packages/torch/serialization.py", line 699, in load
    with _open_file_like(f, 'rb') as opened_file:
  File "/data/csj000714/anaconda3/envs/mipNeRF/lib/python3.7/site-packages/torch/serialization.py", line 231, in _open_file_like
    return _open_file(name_or_buffer, mode)
  File "/data/csj000714/anaconda3/envs/mipNeRF/lib/python3.7/site-packages/torch/serialization.py", line 212, in __init__
    super(_open_file, self).__init__(open(name, mode))
FileNotFoundError: [Errno 2] No such file or directory: 'log/model.pt'
